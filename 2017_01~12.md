&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;今年有点蹊跷。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;今年做的东西有多啰嗦。但让自己的眼界变宽了。以前一直不知道中间件部门做啥的？或者有哪些产品。平时都是从网络上东凑西拼的，依稀绘画出中间件产品的模样。但今年，确实让我眼界变宽了。

## 配置中心。业界中，都有很多配置中心，也有开发的，也有闭源。但对于开源的来说，无法和公司内部的产品进行很好的结合。因此，我们重新撸了一套，套路都是差不多的，但惊艳之处在于，业务方无需在项目中指定配置信息。一切都由底层的组件从配置中心获取，并持久化到本地。

## 数据同步（otter）。
- 公司内部使用的otter太老了，而且，性能有点问题&&有点bug。因为，决定扛起了改造的旗子。和部门的leader 沟通后，发现大数据部门在使用otter 。并再次跟他们沟通了需求后，就开搞了。惊艳的地方在于：修复了 otter 很多bug，比如，页面的、后端的。
- 能让我惊喜的是：otter -->kafka ，性能一直都很低，原先很多人就稿不明白了，我经过分析后，发现 fastjson 版本很低，查阅资料后，发现 fastjson 在高低版本中，有存在性能的问题，决定升级版本。通过压测，性能一下子就提升了 几十倍，但是的压测结果是可以把网卡打满。后来，再次发现，发送到kafka 的姿势不对，因为，其一直都想保证副本都写成功，经过沟通后，只要master 写成功和某个副本写成功了，也可以满足需求的。这次的性能提升了几十倍。总的来说，性能的提升实现了火箭速般的提升。
- 在数据同步中，如果 mysql 的表结构变更了，同步到数据仓库总，挺麻烦的。为此，经过对  otter 改造，添加了新功能：自动同步表结构、一键创建表结构。
    

## rocketmq。老本行。也是我成就最大的地方了。
- 由于公司都是使用开发的rocketmq 客户端，这样不方便管理和版本升级。而且，rocketmq 发送消息失败了，是不会保存消息的，需要业务方自己来处理。这个是一个痛点！！！对于，将rocketmq 进行了封装。比如：版本管理、发送消息多次失败后，将消息存到mongodb 中。然后再次发送。rocketmq 的监控！！！
- rocketmq 异构语言的proxy 开发。连续通宵很多次了，PHP 消费rocketmq 的性能很低，参考了业界的很多做法，其中，阿里云、京东。他们有提供的HTTP 的拉取的方式，但经过比较后，不是很合适公司未来的发展需求，决定还是通过 websocket 的方式来处理。一个人进行开发、设计、调优。性能实现火箭般的提升，之前的 70 多台机器，现在只要用两台机器绰绰有余了。
- rocketmq HTTP 代理层。居于 Tomcat 短链接、NIO2 模式，听过我不管的死干，性能是杠杠的。但有点，GC 太厉害了，不甘心！！！基于 Netty 的方式、外挂线程池的方式，GC 大大降低。性能实现火箭般的飞跃！！！
- 当前准备对rocketmq新特性加强：比如。定时消息（自己设计方案、设计架构、设计运维端；只要等待开发了。）。MQTT 消息协议的支持，在2年多前，就一直想弄，但没有场景，看到了 京东自己实现了，决定自己实现一个。
     

## 架构设计方向
- 之前一直都关注功能如何实现，经过几次的架构设计了后，发现，有点问题了。应该去关注非功能性的需求（性能、可伸缩、可靠性、运维是否方便），这些在架构的设计中，需要常常提醒自己。
  特别是性能。之前的设计都是觉得OK的话，就差不多了，这次，需要 120% 的去认真对待，去慢慢地提升了一点点性能。
  
- 学会了进行产品开发的时候，需要把技术方案落实到文档中，画好时序图、架构图等等。确实是，通过时序图，能够让自己的思路更加清楚。

- 学会了很好的沟通能力，不能随意打断别人、记录其中的疑点。带着问题去。又学了一招！！！

- 面对产品的质疑，大胆去猜想、细心去验证。



## 处事方面
- 认识了很多好朋友，帮助也挺多的。
    
在经过一年的锻炼，接触了很多东西，比如：网关系统、管控中心等等产品的设计与开发。让自己磨练很多的一年的一年了，也是让自己心中的想法真正实现的一年了。能够让我最高兴的是，性能实现火箭般的提升。

    
    
    
    
    
    
